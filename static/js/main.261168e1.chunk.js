(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{151:function(e,t,a){e.exports=a(165)},156:function(e,t,a){},158:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),l=(a(156),a(6)),s=a.n(l),i=a(11),u=a(8),m=a(15),d=(a(158),a(56)),f=a(201),p=a(222),h=a(221),E=a(207),b=a(224),g=a(26),j=a(24),v=Object(n.createContext)({user:null,setUser:function(){}}),O=Object(n.createContext)({accessToken:null,setAccessToken:function(){}}),y=a(116),C=Object(f.a)({signInContainer:{textAlign:"center","& Form":{padding:"1rem","& div":{margin:"0.5rem auto"}}}}),x=function(e){var t=e.placeholder,a=e.type,n=Object(d.a)(e,["placeholder","type"]),o=Object(g.c)(n),c=Object(u.a)(o,2),l=c[0],s=c[1],i=s.error&&s.touched?s.error:"";return r.a.createElement(p.a,Object.assign({},l,{type:a,placeholder:t,helperText:i,error:!!i}))},I=j.a({firstName:j.b().required().max(35),lastName:j.b().required().max(35),email:j.b().required().email("Must be a valid E-mail"),password:j.b().required().matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,"Must be atleast 6 characters, as well as One uppercase, One lowercase, One number and One special case character"),passwordConfirm:j.b().required().test("passwords-match","Passwords must match",(function(e){return this.parent.password===e}))}),k=function(){var e=C();return r.a.createElement(h.a,{className:e.signInContainer},r.a.createElement(g.b,{initialValues:{firstName:"",lastName:"",email:"",password:"",passwordConfirm:""},validationSchema:I,onSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;a(!0),console.log(e),a(!1),n({})}},(function(e){var t=e.isSubmitting;return r.a.createElement(h.a,null,r.a.createElement(y.a,{variant:"h6"},"Sign Up"),r.a.createElement(g.a,null,r.a.createElement(x,{placeholder:"First Name..",name:"firstName",type:"input"}),r.a.createElement("div",null,r.a.createElement(x,{placeholder:"Last Name..",name:"lastName",type:"input"})),r.a.createElement("div",null,r.a.createElement(x,{placeholder:"E-mail..",name:"email",type:"email"})),r.a.createElement("div",null,r.a.createElement(x,{placeholder:"Password..",name:"password",type:"password"})),r.a.createElement("div",null,r.a.createElement(x,{placeholder:"Confirm Password..",name:"passwordConfirm",type:"password"})),r.a.createElement("div",null,r.a.createElement(E.a,{disabled:t,type:"submit"},"submit"))))})))},N=Object(f.a)({signInContainer:{display:"flex",flexDirection:"column",justifyContent:"center",width:"20rem",textAlign:"center","& Form":{padding:"1rem","& div":{margin:"0.5rem auto"}}}}),w=function(e){var t=e.placeholder,a=e.type,n=Object(d.a)(e,["placeholder","type"]),o=Object(g.c)(n),c=Object(u.a)(o,2),l=c[0],s=c[1],i=s.error&&s.touched?s.error:"";return r.a.createElement(p.a,Object.assign({},l,{type:a,helperText:i,error:!!i,variant:"outlined",label:t}))},P=j.a({email:j.b().required().email("Must be a valid e-mail"),password:j.b().required()}),S=function(){var e=N(),t=Object(m.g)(),a=Object(n.useContext)(v).setUser,o=Object(n.useContext)(O).setAccessToken,c=Object(n.useState)(!1),l=Object(u.a)(c,2),d=l[0],f=l[1];function p(){return(p=Object(i.a)(s.a.mark((function e(n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:e.sent.json().then((function(e){var n=Object.entries(e.user)[0][1];console.log(n),a(n),o(e.token),t.push("/dashboard")})).catch((function(e){return console.error(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(h.a,{className:e.signInContainer},r.a.createElement("h1",null,"Sign in"),r.a.createElement(g.b,{initialValues:{email:"",password:""},validationSchema:P,onSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;a(!0),function(e,t){p.apply(this,arguments)}("http://localhost:4000/userauth/login",e),n(),a(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement("div",null,r.a.createElement(w,{placeholder:"E-mail..",name:"email",type:"email"})),r.a.createElement("div",null,r.a.createElement(w,{placeholder:"Password..",name:"password",type:"password"})),r.a.createElement(E.a,{color:"primary",variant:"contained",disabled:t,type:"submit"},"submit")))})),r.a.createElement("p",null,"Not a member?"," ",r.a.createElement(E.a,{onClick:function(){f(!0)},color:"primary",variant:"text"},"Sign Up!")),r.a.createElement(b.a,{fullWidth:!0,open:d,onClose:function(){f(!1)}},r.a.createElement(k,null)))},U=a(141),T=function(){return r.a.createElement(h.a,{paddingTop:"2rem",display:"flex",justifyContent:"center"},r.a.createElement(U.a,{elevation:5},r.a.createElement(S,null)))},_=a(208),B=a(209),A=a(167),R=a(138),L=a(210),z=a(132),F=a.n(z),D=a(27),q=function(){var e=r.a.useState(null),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(v),l=c.user,s=c.setUser,i=Object(n.useContext)(O).setAccessToken,m=function(){o(null)};return r.a.createElement(_.a,{position:"static"},r.a.createElement(B.a,null,l?r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{edge:"start",className:"navMenuButton",color:"inherit","aria-label":"menu",onClick:function(e){o(e.currentTarget)}},r.a.createElement(F.a,null)),r.a.createElement(R.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:m},r.a.createElement(L.a,{color:"textPrimary",component:D.b,to:"/dashboard",onClick:m},"Timeline"),r.a.createElement(L.a,{color:"textPrimary",component:D.b,to:"/userIndex",onClick:m},"User List"),r.a.createElement(L.a,{color:"textPrimary",component:D.b,children:D.b,to:"/profile/".concat(l.userurl),onClick:m},"My Profile"),r.a.createElement(L.a,{color:"textPrimary",component:D.b,to:"/profile/".concat(l.first_name).concat(l.last_name,"/edit"),onClick:m},"Edit Profile"),r.a.createElement(L.a,{color:"textPrimary",component:D.b,onClick:function(){document.cookie="loggedIn=true; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",i(null),s(null),m()}},"Logout"))):null,r.a.createElement(y.a,{variant:"h6",color:"inherit"},document.title)))},J=function(){return r.a.createElement("div",null,r.a.createElement(q,null))},W=a(219),M=a(211),G=a(212),H=function(e){var t=e.placeholder,a=e.type,n=e.label,o=e.multiline,c=Object(d.a)(e,["placeholder","type","label","multiline"]),l=Object(g.c)(c),s=Object(u.a)(l,2),i=s[0],m=s[1],f=m.error&&m.touched?m.error:"";return r.a.createElement(p.a,Object.assign({},i,{type:a,helperText:f,error:!!f,variant:"outlined",placeholder:t,label:n,multiline:o}))},V=j.a({message:j.b().required("Post cannot be empty.").min(5,"Post must be atleast 5 characters.").trim()}),$=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],c=a[1],l=Object(n.useContext)(v).user,m=Object(n.useContext)(O).accessToken,d=function(){c(!1)},f=function(){var t=Object(i.a)(s.a.mark((function t(a,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(a,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify(n)});case 2:t.sent.json().then((function(t){console.log(t),d(),e.setRefreshInfo(e.refreshInfo+1)}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(h.a,null,r.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){c(!0)}},"Create new post"),r.a.createElement(b.a,{open:o,onClose:d},r.a.createElement(g.b,{initialValues:{message:"",userId:l._id},validationSchema:V,onSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;a(!0),f("http://localhost:5000/posts/create",e),n(),a(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(M.a,null,r.a.createElement(H,{placeholder:"What's goin' on?",name:"message",multiline:!0})),r.a.createElement(G.a,null,r.a.createElement(E.a,{onClick:d,color:"primary"},"Cancel"),r.a.createElement(E.a,{color:"primary",disabled:t,type:"submit"},"Post"))))}))))},Y=a(214),Z=a(139),K=a(218),Q=a(226),X=a(135),ee=a.n(X),te=a(110),ae=a.n(te),ne=a(133),re=a.n(ne),oe=Object(f.a)({interactionButton:{padding:"0",margin:"0"}}),ce=function(e){var t=e.placeholder,a=e.type,n=e.label,o=e.multiline,c=Object(d.a)(e,["placeholder","type","label","multiline"]),l=Object(g.c)(c),s=Object(u.a)(l,2),i=s[0],m=s[1],f=m.error&&m.touched?m.error:"";return r.a.createElement(p.a,Object.assign({},i,{type:a,helperText:f,error:!!f,variant:"outlined",placeholder:t,label:n,multiline:o}))},le=j.a({message:j.b().required("Comment cannot be empty.").trim()}),se=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),o=a[0],c=a[1],l=Object(n.useContext)(v).user,m=Object(n.useContext)(O).accessToken,d=oe(),f=function(){c(!1)},p=function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify(a)});case 2:e.sent.json().then((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:d.interactionButton,onClick:function(){c(!0)}},r.a.createElement(re.a,{fontSize:"small"}),e.postComments.length),r.a.createElement(b.a,{open:o,onClose:f},r.a.createElement(g.b,{initialValues:{author:"".concat(l._id),message:""},validationSchema:le,onSubmit:function(t,a){var n=a.setSubmitting,r=a.resetForm;n(!0),p("http://localhost:5000/comments/".concat(e.postId),t),r(),n(!1),f(),e.setRefreshInfo(e.refreshInfo+1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(M.a,null,r.a.createElement(ce,{placeholder:"Type your comment..",name:"message",multiline:!0})),r.a.createElement(G.a,null,r.a.createElement(E.a,{onClick:f,color:"primary"},"Cancel"),r.a.createElement(E.a,{color:"primary",disabled:t,type:"submit"},"Post"))))}))))},ie=a(225),ue=a(213),me=a(215),de=a(134),fe=a.n(de),pe=a(206),he=a(168),Ee=a(216),be=a(217),ge=Object(f.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},list:{display:"inline",width:"100%"},listItem:{margin:"2px 0"},avatarHover:{cursor:"pointer"}}}));function je(e){var t=ge(),a=Object(n.useState)([]),o=Object(u.a)(a,2),c=o[0],l=o[1],d=Object(m.g)(),f=Object(n.useContext)(v).user;Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/comments/".concat(t),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 2:e.sent.json().then((function(e){l(e.comments)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}})()(e.postId,e.token)}),[e.postId,e.token,e.refreshInfo]);var p=function(){var t=Object(i.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/comments/".concat(e.postId,"/").concat(a),{method:"DELETE",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)}});case 2:t.sent.json().then((function(t){console.log(t),e.setRefreshInfo(e.refreshInfo+1)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:t.root},r.a.createElement(ie.a,{elevation:2},r.a.createElement(ue.a,{expandIcon:r.a.createElement(fe.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(y.a,{className:t.heading},"Comments")),r.a.createElement(Y.a,null),r.a.createElement(me.a,{className:t.list},c.map((function(e,a){return r.a.createElement(pe.a,{className:t.list},r.a.createElement(he.a,{className:t.listItem},r.a.createElement(h.a,{className:t.avatarHover,onClick:function(){return d.push("/profile/".concat(e.author.userurl))}},r.a.createElement(Ee.a,null,r.a.createElement(Q.a,{src:e.author.profileImgUrl}))),r.a.createElement(be.a,{primary:r.a.createElement(y.a,{variant:"caption"},"".concat(e.author.first_name," ").concat(e.author.last_name)),secondary:r.a.createElement(y.a,{variant:"body1"},e.message)}),function(e,t){if(t.includes(e))return r.a.createElement(A.a,{onClick:function(){return p(e)}},r.a.createElement(ae.a,null))}(e._id,f.comments)),a!==c.length-1?r.a.createElement(Y.a,{variant:"middle"}):null)})))))}var ve=Object(f.a)({postComponentStyles:{width:"95%",marginBottom:"3rem",border:"1px solid black"},avatarSmall:{height:"40px",width:"40px",marginRight:"1rem"},posterInfo:{display:"flex",alignItems:"center",borderBottom:"1px solid black"},postInteractions:{display:"flex",justifyContent:"end"},interactionButton:{padding:0,margin:"0 1rem"},avatarContainer:{cursor:"pointer"}}),Oe=function(e){var t=Object(n.useContext)(v).user,a=Object(n.useContext)(O).accessToken,o=Object(m.g)(),c=ve(),l=function(){var n=Object(i.a)(s.a.mark((function n(r){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://localhost:5000/posts/".concat(r,"/").concat(t._id),{method:"DELETE",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 2:n.sent.json().then((function(t){return e.setDeletedPosts((function(e){return[].concat(Object(Z.a)(e),[t])})),console.log(t)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),u=function(){var t=Object(i.a)(s.a.mark((function t(n,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/likes",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({postId:n,userId:r})});case 2:t.sent.json().then((function(t){e.setLikes(t),console.log(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(K.a,{className:c.postComponentStyles,elevation:5},r.a.createElement(h.a,{className:c.posterInfo},r.a.createElement(h.a,{onClick:function(){return o.push("/profile/".concat(e.postProfileUrl))},className:c.avatarContainer},r.a.createElement(Q.a,{className:c.avatarSmall,src:e.profilePic,alt:"".concat(e.firstName," ").concat(e.lastName)})),r.a.createElement(y.a,{variant:"overline"},e.firstName," ",e.lastName)),r.a.createElement(h.a,{padding:1},r.a.createElement(y.a,{variant:"body1",paragraph:!0},e.post),r.a.createElement(Y.a,null),r.a.createElement(h.a,{className:c.postInteractions},r.a.createElement(se,{postComments:e.postComments,postId:e.postId,refreshInfo:e.refreshInfo,setRefreshInfo:e.setRefreshInfo}),r.a.createElement(A.a,{onClick:function(){return u(e.postId,t._id)},className:c.interactionButton},r.a.createElement(ee.a,{fontSize:"small"}),e.postLikes.length),t._id===e.postAuthorId?r.a.createElement(A.a,{onClick:function(){return l(e.postId)},className:c.interactionButton},r.a.createElement(ae.a,{fontSize:"small"})):null),r.a.createElement(je,{postId:e.postId,token:a,refreshInfo:e.refreshInfo,setRefreshInfo:e.setRefreshInfo})))},ye=Object(f.a)({timelineContainer:{overflow:"auto",paddingBottom:"1rem",paddingTop:"1rem"},timelinePaper:{backgroundColor:"#ffffffbf"},title:{paddingLeft:"1rem"}}),Ce=function(e){var t=e.posts,a=ye();return r.a.createElement(W.a,{className:a.timelineContainer,maxWidth:"md"},r.a.createElement(U.a,{className:a.timelinePaper,elevation:15},r.a.createElement(Y.a,null),r.a.createElement(h.a,{paddingY:3,display:"flex",flexDirection:"column",alignItems:"center"},t.map((function(t,a){return r.a.createElement(Oe,{key:"".concat(t.author.first_name,"_").concat(t.author.last_name,"_").concat(t.author._id,"_").concat(a),firstName:t.author.first_name,lastName:t.author.last_name,profilePic:t.author.profileImgUrl,postAuthorId:t.author._id,post:t.message,setDeletedPosts:e.setDeletedPosts,postId:t._id,postLikes:t.likes,postComments:t.comments,setLikes:e.setLikes,postProfileUrl:t.author.userurl,refreshInfo:e.refreshInfo,setRefreshInfo:e.setRefreshInfo})})).reverse())))};function xe(){var e=Object(n.useContext)(v).user,t=Object(n.useContext)(O).accessToken,a=Object(n.useState)(),o=Object(u.a)(a,2),c=o[0],l=o[1],m=Object(n.useState)([]),d=Object(u.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)([]),b=Object(u.a)(E,2),g=b[0],j=b[1],C=Object(n.useState)(0),x=Object(u.a)(C,2),I=x[0],k=x[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:e.sent.json().then((function(e){l(e.posts)})).catch((function(e){console.error(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}("http://localhost:5000/posts")}),[t,g,f,I]),c&&c.length>0?r.a.createElement(W.a,null,r.a.createElement(h.a,{textAlign:"center"},r.a.createElement(y.a,{variant:"h6"},"Hello, ".concat(e.first_name,"!")),r.a.createElement($,{refreshInfo:I,setRefreshInfo:k})),r.a.createElement(Ce,{posts:c,deletedPosts:g,setDeletedPosts:j,setLikes:p,refreshInfo:I,setRefreshInfo:k})):r.a.createElement(W.a,null,r.a.createElement(h.a,null,"Hello, ".concat(e.first_name,"!")),r.a.createElement($,null),r.a.createElement(U.a,{elevation:10},r.a.createElement(y.a,null,"Nothing to see here...")))}var Ie=Object(f.a)({timelineContainer:{overflow:"auto",paddingBottom:"3rem",paddingTop:"1rem"},timelinePaper:{backgroundColor:"#ffffffbf"},title:{paddingLeft:"1rem"}}),ke=function(e){var t=Ie(),a=e.posts;return r.a.createElement(W.a,{className:t.timelineContainer,maxWidth:"md"},r.a.createElement(U.a,{className:t.timelinePaper,elevation:15},r.a.createElement(y.a,{className:t.title,variant:"overline"},e.firstName,"'s Posts"),r.a.createElement(Y.a,null),r.a.createElement(h.a,{paddingY:3,display:"flex",flexDirection:"column",alignItems:"center"},a.map((function(t,a){return r.a.createElement(Oe,{key:"".concat(e.firstName,"_").concat(e.lastName,"_").concat(e.userId,"_").concat(a),firstName:e.firstName,lastName:e.lastName,profilePic:e.profilePic,postAuthorId:e.userId,post:t.message,postId:t._id,deletedPosts:e.deletedPosts,setDeletedPosts:e.setDeletedPosts,postLikes:t.likes,postComments:t.comments,postProfileUrl:e.userurl,likes:e.likes,setLikes:e.setLikes,refreshInfo:e.refreshInfo,setRefreshInfo:e.setRefreshInfo})})).reverse())))},Ne=a(137),we=a.n(Ne),Pe=a(136),Se=a.n(Pe),Ue=function(e){var t=Object(n.useContext)(O).accessToken,a=function(){var a=Object(i.a)(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("http://localhost:5000/users/sendFriendReq",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({profileUser:e.profileUser,authUser:e.authUser})});case 2:a.sent.json().then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),o=function(){var a=Object(i.a)(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("http://localhost:5000/users/acceptFriendReq",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({profileUser:e.profileUser,authUser:e.authUser})});case 2:a.sent.json().then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),c=function(){var a=Object(i.a)(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("http://localhost:5000/users/unfriend",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({profileUser:e.profileUser,authUser:e.authUser})});case 2:a.sent.json().then((function(e){console.log(e)})).catch((function(e){console.error(e)}));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return e.current.includes(e.authUser)?r.a.createElement(E.a,{onClick:c,variant:"outlined"},r.a.createElement(y.a,{variant:"caption"},"Unfriend")):e.pendIn.includes(e.authUser)?r.a.createElement(E.a,{disabled:!0,variant:"outlined"},r.a.createElement(y.a,{variant:"caption"},"Requested")):e.pendOut.includes(e.authUser)?r.a.createElement(E.a,{onClick:o,variant:"outlined"},r.a.createElement(y.a,{variant:"caption"},"Accept Friend Request")):e.profileUser!==e.authUser?r.a.createElement(E.a,{onClick:a,variant:"outlined"},r.a.createElement(y.a,{variant:"caption"},"Add Friend")):null},Te=a(205),_e=a(203);function Be(){return(Be=Object(i.a)(s.a.mark((function e(t,a,n,r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("img",a),console.log(a),e.next=5,fetch(t,{method:"POST",mode:"cors",credentials:"include",headers:{Authorization:"Bearer ".concat(n)},body:o});case 5:e.sent.json().then((function(e){console.log(e),console.log("end handleSubmit"),r.setRefresh(r.refreshInfo+1)})).catch((function(e){return console.log("Error",e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=Object(f.a)({container:{display:"flex",flexDirection:"column",width:"min-width"}}),Re=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),o=a[0],c=a[1],l=Object(n.useContext)(O).accessToken,s=Ae();return r.a.createElement(W.a,{className:s.container},r.a.createElement(y.a,{variant:"h6",align:"center"},"Upload Image"),r.a.createElement(Y.a,null),r.a.createElement(h.a,{margin:"2rem auto"},r.a.createElement(Te.a,{form:"file",htmlFor:"file"},"Profile Picture"),r.a.createElement("div",null,r.a.createElement(_e.a,{onChange:function(e){var t;t=e.target.files[0],c(t),console.log(t),console.log("end selectionChangeHandler"),console.log(o)},type:"file",name:"file"})),r.a.createElement(E.a,{onClick:function(t){!function(e,t,a,n){Be.apply(this,arguments)}("http://localhost:5000/upload/s3ImgUpload",o,l,{setRefresh:e.setRefreshInfo,refreshInfo:e.refreshInfo}),e.handleClose()}},"Upload Photo")))},Le=Object(f.a)({userCard:{marginTop:"1rem",display:"flex"},infoBox:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"100pc"},fullName:{alignSelf:"center",textAlign:"center"},ageLocation:{display:"flex",justifyContent:"space-around"},avatarPic:{height:"160px",width:"160px"},friendButton:{alignSelf:"center"}}),ze=function(e){var t=Le(),a=Object(n.useState)(!1),o=Object(u.a)(a,2),c=o[0],l=o[1],s=function(){l(!1)};return r.a.createElement(W.a,{maxWidth:"md"},r.a.createElement(K.a,{elevation:10,className:t.userCard},r.a.createElement(Q.a,{className:t.avatarPic,variant:"rounded",src:e.profilePic,alt:"".concat(e.firstName," ").concat(e.lastName)}),r.a.createElement(h.a,{className:t.infoBox},r.a.createElement(h.a,{className:t.fullName},r.a.createElement(y.a,{variant:"h6"},e.firstName," ",e.lastName)),r.a.createElement(h.a,{margin:"auto",onClick:function(){return e.setRefreshInfo(e.refreshInfo+1)},className:t.friendButton},r.a.createElement(Ue,{authUser:e.authUser,profileUser:e.profileUser,current:e.friendsCurrent,pendIn:e.friendsPendIn,pendOut:e.friendsPendOut})),e.age&&e.city&&e.state?r.a.createElement(h.a,{className:t.ageLocation},r.a.createElement(y.a,{variant:"subtitle"},e.age,r.a.createElement(Se.a,null)),r.a.createElement(y.a,null,e.city,", ",e.state,r.a.createElement(we.a,null))):null,e.authUser===e.profileUser?r.a.createElement(h.a,{margin:"auto"},r.a.createElement(E.a,{onClick:function(){l(!0)},variant:"contained"},"Edit Profile"),r.a.createElement(b.a,{open:c,onClose:s},r.a.createElement(Re,{currAge:e.age,currCity:e.city,currState:e.state,handleClose:s,setRefreshInfo:e.setRefreshInfo,refreshInfo:e.refreshInfo}))):null)))};function Fe(){var e=Object(m.h)().userurl,t=Object(n.useContext)(O).accessToken,a=Object(n.useContext)(v).user,o=Object(n.useState)(null),c=Object(u.a)(o,2),l=c[0],d=c[1],f=Object(n.useState)(!0),p=Object(u.a)(f,2),E=p[0],b=p[1],g=Object(n.useState)(0),j=Object(u.a)(g,2),C=j[0],x=j[1],I=Object(n.useState)([]),k=Object(u.a)(I,2),N=k[0],w=k[1],P=Object(n.useState)([]),S=Object(u.a)(P,2),U=S[0],T=S[1],_=a._id;return Object(n.useEffect)((function(){function a(){return(a=Object(i.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:e.sent.json().then((function(e){d(e.result[0]),b(!1)})).catch((function(e){console.error(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){a.apply(this,arguments)}("http://localhost:5000/users/find/".concat(e))}),[e,t,C,N,U]),void 0===l?r.a.createElement(y.a,null,"Not found..."):E?r.a.createElement(y.a,null,"Loading..."):r.a.createElement(W.a,{disableGutters:!0,maxWidth:"xl"},r.a.createElement(ze,{age:l.age,firstName:l.first_name,lastName:l.last_name,city:l.city,state:l.state,profilePic:l.profileImgUrl,friendsCurrent:l.friends.current,friendsPendIn:l.friends.pendIn,friendsPendOut:l.friends.pendOut,profileUser:l._id,setRefreshInfo:x,refreshInfo:C,authUser:_}),r.a.createElement(h.a,null,r.a.createElement(ke,{profilePic:l.profileImgUrl,posts:l.posts.map((function(e){return e})),firstName:l.first_name,lastName:l.last_name,userId:l._id,deletedPosts:N,setDeletedPosts:w,userurl:l.userurl,likes:U,setLikes:T,refreshInfo:C,setRefreshInfo:x})))}var De=a(220),qe=Object(f.a)({cardStyles:{height:"15rem",width:"15rem"},avatarPic:{height:"125px",width:"125px",margin:"1rem auto",cursor:"pointer"},friendButton:{margin:"auto",textAlign:"center"}}),Je=function(e){var t=qe(),a=Object(m.g)();return r.a.createElement(K.a,{className:t.cardStyles},r.a.createElement(h.a,{onClick:function(){return a.push("/profile/".concat(e.profileUrl))}},r.a.createElement(Q.a,{src:e.profilePic,className:t.avatarPic})),r.a.createElement(y.a,{align:"center"},"".concat(e.first_name," ").concat(e.last_name)),r.a.createElement(h.a,{className:t.friendButton,onClick:function(){return e.setPageUpdates(e.pageUpdates+1)}},r.a.createElement(Ue,{authUser:e.authUser,profileUser:e.profileUser,current:e.friendsCurrent,pendIn:e.friendsPendIn,pendOut:e.friendsPendOut})))},We=Object(f.a)({UserIndexContainer:{}}),Me=function(e){var t=Object(n.useContext)(v).user,a=Object(n.useContext)(O).accessToken,o=Object(n.useState)([]),c=Object(u.a)(o,2),l=c[0],m=c[1],d=Object(n.useState)(0),f=Object(u.a)(d,2),p=f[0],h=f[1],E=We();return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/users",{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 2:e.sent.json().then((function(e){console.log(e),m(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a,p]),0!==l.length?r.a.createElement(De.a,{sm:"12",spacing:"5",justify:"center",container:!0,className:E.UserIndexContainer},l.map((function(e,a){return e._id!==t._id?r.a.createElement(De.a,{item:!0},r.a.createElement(Je,{first_name:e.first_name,last_name:e.last_name,pageUpdates:p,setPageUpdates:h,authUser:t._id,profileUser:e._id,profilePic:e.profileImgUrl,friendsCurrent:e.friends.current,friendsPendOut:e.friends.pendOut,friendsPendIn:e.friends.pendIn,profileUrl:e.userurl})):null}))):r.a.createElement(De.a,{sm:"12",spacing:"5",justify:"center",container:!0,className:E.UserIndexContainer},r.a.createElement(De.a,{item:!0},r.a.createElement(y.a,{variant:"h4"},"Loading..")))},Ge=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(null),l=Object(u.a)(c,2),d=l[0],f=l[1],p=Object(n.useState)(!0),h=Object(u.a)(p,2),E=h[0],b=h[1];return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:4000/userauth/curruser",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:e.sent.json().then((function(e){var t=e.user;console.log(t),o(t),f(e.token),b(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.cookie.includes("loggedIn=true")?null==a&&(console.log(document.cookie.includes("loggedIn=true")),function(){e.apply(this,arguments)}()):b(!1)}),[a]),E?r.a.createElement(y.a,null,"Loading..."):r.a.createElement(v.Provider,{value:{user:a,setUser:o}},r.a.createElement(O.Provider,{value:{accessToken:d,setAccessToken:f}},r.a.createElement(J,null),a&&d?r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/auth",render:function(){return r.a.createElement("h1",null,"You're already logged in")}}),r.a.createElement(m.b,{path:"/logout",render:function(){return r.a.createElement("h1",null,"Logout route works")}}),r.a.createElement(m.b,{path:"/profile/:userurl",exact:!0,children:r.a.createElement(Fe,null)}),r.a.createElement(m.b,{path:"/dashboard",children:r.a.createElement(xe,null)}),r.a.createElement(m.b,{path:"/userIndex",children:r.a.createElement(Me,null)}),r.a.createElement(m.b,{path:"/",exact:!0,render:function(){return r.a.createElement(m.a,{to:"/dashboard"})}}),r.a.createElement(m.b,{path:"*",render:function(){return r.a.createElement("h1",null,"404 Not Found")}})):r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",children:r.a.createElement(T,null)}),r.a.createElement(m.a,{to:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D.a,null,r.a.createElement(Ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[151,1,2]]]);
//# sourceMappingURL=main.261168e1.chunk.js.map